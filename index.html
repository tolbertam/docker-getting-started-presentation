<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Getting Started with Docker</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/dockerpres.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/solarized-light.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                                <section>
                                    <h2>Getting Started with Docker</h2>
                                    <img align="center" border=0 data-src="static/moby.svg"/>
                                    <div class="footer" style="text-align:center">Hosted online at: <a href="http://tiny.cc/dgsp">http://tiny.cc/dgsp</a></div>
                                </section>
                                <section>
                                    <h2>whoami</h2>
                                    <ul>
                                        <li>Andy Tolbert</li>
                                        <li>Software Engineer @ <a href="http://www.datastax.com">DataStax</a></li>
                                        <li><a href="http://twitter.com/tolbertam"/>@tolbertam</a></li>
                                        <li class="fragment">Docker noob</li>
                                    </ul>
                                </section>
                                <section>
                                    <section>
                                        <h1>What is Docker?</h1>
                                    </section>
                                    <section>
                                        <bq>"Docker is an open-source project that automates the deployment of Linux applications inside software containers."</bq>
                                    </section>
                                    <section>
                                        <h2>Containers, Eh?</h2>
                                        <p>Virtualization method for running a number of sandboxed environments <u>using a single kernel</u></p>
                                    </section>
                                    <section>
                                        <h2>Containers are: Lightweight</h2>
                                        <ul>
                                            <li>A virtual machine contains an entire OS environment</li>
                                            <li>Containers have just the application you are trying to provide and its dependencies</li>
                                        </ul>
                                        <center><p>
                                            <img width="40%" data-src="static/compare_vm.png"/>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                            <img width="40%" data-src="static/compare_docker.png"/>
                                            <div class="footer">image source: <a href="https://www.docker.com/what-docker">https://www.docker.com/what-docker</a></div>
                                        </p></center>
                                    </section>
                                    <section>
                                        <h2>Containers are: Isolated</h2>
                                        <p>Containers isolate system resources using linux features.</p>
                                        <ul>
                                            <li><font style="font-family: Courier"><a href="https://www.kernel.org/doc/Documentation/cgroup-v1/cgroups.txt">cgroups</a>&nbsp;&nbsp;&nbsp;</font> hardware (cpu, memory, networking, etc.)</li>
                                            <li><font style="font-family: Courier"><a href="http://man7.org/linux/man-pages/man7/namespaces.7.html">namespaces</a></font> os (PID, hostname, userid, fs, etc.)</li>
                                        </ul>
                                        <p><font style="font-family: Courier">libcontainer</font> used to interface with this functionality and other facilities.</p>
                                    </section>
                                    <section>
                                        <h2>Containers are: Fast</h2>
                                        <ul>
                                            <li>Starting a container is virtually as fast as starting a process</li>
                                            <li class="fragment">Building a container is fast because it just contains your application</li>
                                            <li class="fragment">Stopping a container is fast because you are just killing process(es)</li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2>Containers are: Disposable</h2>
                                        <ul>
                                            <li>Can be single purpose: <i>'Run this command and exit'</i></li>
                                            <li class="fragment">External volumes can be shared: <i>'Run this database, store data in /mnt/data0'</i></li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2>Containers are: Simple</h2>
                                        <ul>
                                            <li>Limited Scope:
                                                <ul>
                                                    <li class="fragment">What needs to be installed? How do I install it?</li>
                                                    <li class="fragment">How do I run my application?</li>
                                                    <li class="fragment">What ports do I expose?</li>
                                                </ul>
                                            </li>
                                            <li class="fragment">Separation of concerns:&nbsp;<i>'So easy a developer can do it!'</i></li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2>Docker History</h2>
                                        <ul>
                                            <li><font style="font-family: Courier">&nbsp;&nbsp;&nbsp;&nbsp;2008:</font> First release of <font style="font-family: Courier"><a href="https://linuxcontainers.org">lxc</a></font></li>
                                            <li class="fragment"><font style="font-family: Courier">Jan 2013:</font> Started as a side project @ dotCloud</li>
                                            <li class="fragment"><font style="font-family: Courier">Jul 2013:</font> Open Sourced</li>
                                            <li class="fragment"><font style="font-family: Courier">Oct 2013:</font> dotCloud reincorporated as Docker, Inc.</li>
                                            <li class="fragment"><font style="font-family: Courier">Jun 2014:</font> 1.0 release</li>
                                            <li class="fragment"><font style="font-family: Courier">Jun 2015:</font> <a href="https://www.opencontainers.org">Open Container Initiative</a> created</li>
                                            <li class="fragment"><font style="font-family: Courier">Apr 2016:</font> 1.11 release, first based on OCI tech</li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2>Docker is: Awesome</h2>
                                        <p class="fragment">The community agrees</p>
                                        <ul class="fragment">
                                            <li><a href="https://github-ranking.com/docker/docker">26th most popular project</a> on GitHub (19180 ðŸŒŸ)</li>
                                            <li>So successful caused company to pivot (dotCloud =&gt; Docker, Inc).</li>
                                            <li>Most Cloud Providers integrate with it (AWS, GCE, Azure, etc.)</li>
                                        </ul>
                                    </section>
                                </section>
				<section>
                                    <section>
                                        <h1>Getting Docker</h1>
                                    </section>
                                    <section>
                                        <h2><a href="https://docs.docker.com/engine/installation/linux/">Docker for Linux</a></h2>
                                        <ul>
                                            <li>Packages available for most Linux platforms</li>
                                            <li>Build from Source</li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2><a href="https://docs.docker.com/docker-for-mac/">Docker for Mac</a></h2>
                                        <ul>
                                            <li>Uses <a href="https://github.com/docker/HyperKit/">HyperKit</a>/<a href="https://github.com/mist64/xhyve">xhyve</a>, a small HyperVisor for OS X.</li>
                                            <li>Requires OS X 10.10 (Yosemite).  Docker Toolbox can be used on older versions of OS X</li>
                                        </ul>
                                    </section>
                                    <section>
                                        <h2><a href="https://docs.docker.com/docker-for-windows/">Docker for Windows</a></h2>
                                        <ul>
                                            <li>Uses <a href="https://www.microsoft.com/en-us/cloud-platform/virtualization">Microsoft Hyper-V</a></li>
                                            <li>Requires Windows 8.  Docker Toolbox can be used on older verisons of Windows</li>
                                        </ul>
                                    </section>
                                </section>
                                <section>
                                    <h2>Docker CLI</h2>
                                    <ul>
                                        <li>Docker runs the hypervisor in a backround daemon</li>
                                        <li>The <font style="font-family: Courier">docker</font> command is used to interact with docker</li>
                                    </ul>
                                    <pre class="fragment"><code class="bash" data-trim>
Usage: docker [OPTIONS] COMMAND [arg...]
       docker [ --help | -v | --version ]
...

Commands:
    build     Build an image from a Dockerfile
    create    Create a new container
    exec      Run a command in a running container
    images    List images
    logs      Fetch the logs of a container
    ps        List containers
    pull      Pull an image or a repository from a registry
    rm        Remove one or more containers
    run       Run a command in a new container
    start     Start one or more stopped containers
    stop      Stop one or more running containers

... and more ...
                                    </code></pre>
                                </section>
                                <section>
                                    <h2>Kitematic</h2>
                                    <img align="center" border=0 data-src="static/kitematic.png"/>
                                </section>
                                <section>
                                    <h2><a href="https://hub.docker.com">Docker Hub</a></h2>
                                </section>
                                <section>
                                    <section>
                                        <h2>Demo: Running a Grafana Container</h2>
                                    </section>
                                    <section>
                                        <h2>Docker Run</h2>
                                        <pre><code class="bash" data-trim>
$ docker run -d -p 8125:8125/udp -p 8126:8126 -p 3000:80 --name grafana kamon/grafana_graphite
Unable to find image 'kamon/grafana_graphite:latest' locally
latest: Pulling from kamon/grafana_graphite
71a21fdea81d: Pull complete 
cf68a3ea6e1d: Pull complete 
31cb2a4d344a: Pull complete 
0341b6fcb0fe: Pull complete 
...
eac652639fe7: Pull complete 
a759dc349f21: Pull complete 
14bc97cfee28: Pull complete 
4c29088bbc9f: Pull complete 
Digest: sha256:8b75a8bd5f3215248f6d6e84ddacb84c3e343f1d2cc2dcd0b820f9b12cb6a44f
Status: Downloaded newer image for kamon/grafana_graphite:latest
fb4462223ae22d6744a7b49914261a3735eb45d0061e4d21d2ea941de3dbe13b
                                        </code></pre>
                                    </section>
                                    <section>
                                        <h2>Up and Running!</h2>
                                        <ul>
                                            <li>Navigate to <a href="http://localhost:3000">http://localhost:3000</a></li>
                                            <li>Authenticate with admin/admin credentials</li>
                                            <li>Add a datasource for http://localhost:8000</li>
                                        </ul>
                                        <img align="center" width="60%" data-src="static/grafana_datasource.png"/>
                                    </section>
                                </section>
                                <section>
                                    <section>
                                        <h2>Demo: Feeding Stats from Another Container</h2>
                                    </section>
                                    <section>
                                        <h2>Running a Conatiner with Collectd</h2>
                                        <pre><code class="bash" data-trim>
docker run -e HOST_NAME=host0 \
-e GRAPHITE_HOST=$(docker inspect --format '{{ .NetworkSettings.IPAddress }}' grafana) \
-e GRAPHITE_PORT=2003 \
-e COLLECT_INTERVAL=1 \
-d --name host0 andreasjansson/collectd-write-graphite
latest: Pulling from andreasjansson/collectd-write-graphite
8a2df099fc1a: Pull complete 
09aa8e119200: Pull complete 
...
5f9d5749cc76: Pull complete 
fbc5e6650f83: Pull complete 
Digest: sha256:c8bee49fcd8f0e4428d4c56e8f40f19c34d6b2c0e297a65ad0a27e6f512b0b7c
Status: Downloaded newer image for andreasjansson/collectd-write-graphite:latest
47202ad215d78611b13285e41bc4c92271d306dce94791599b0a884c8e4dfc4b
                                        </code></pre>
                                    </section>
                                    <section>
                                        <h2>Launching 10 more containers</h2>
                                        <pre><code class="bash" data-trim>
#!/bin/bash
for i in {1..10}; do
    HOST=host${i}
    echo "Starting $HOST"
    docker run -e HOST_NAME=$HOST \
    -e GRAPHITE_HOST=$(docker inspect --format '{{ .NetworkSettings.IPAddress }}' grafana) \
    -e GRAPHITE_PORT=2003 \
    -e COLLECT_INTERVAL=1 \
    -d --name $HOST andreasjansson/collectd-write-graphite
done
                                        </code></pre>
                                    </section>
                                    <section>
                                        <h2>Visualizing Container Stats on Dashboard</h2>
                                        <img align="center" width="75%" data-src="static/dashboard.png"/>
                                    </section>
                                </section>
                                <section>
                                    <section>
                                        <h2>Demo: Publishing this Presentation to Docker Hub</h2>
                                    </section>
                                    <section>
                                        <h2>Creating a Dockerfile</h2>
                                        <pre><code class="bash" data-trim>
FROM node:6.6
RUN git clone --branch 3.3.0 https://github.com/hakimel/reveal.js.git
RUN cd reveal.js &amp;&amp; npm install
RUN npm install -g grunt-cli
ADD index.html /reveal.js/index.html
ADD dockerpres.css /reveal.js/css/theme/dockerpres.css
ADD solarized-light.css /reveal.js/lib/css/solarized-light.css
ADD static /reveal.js/static
WORKDIR /reveal.js/
ENTRYPOINT ["grunt", "serve"]
EXPOSE 8000
                                        </code></pre>
                                    </section>
                                    <section>
                                        <h2>Building the Image</h2>
                                        <pre><code class="bash" data-trim>
$ docker build -t tolbertam/docker-getting-started-presentation .
Sending build context to Docker daemon 805.9 kB
Step 1 : FROM node:6.6
 ---&gt; c0d8845263e3
Step 2 : RUN git clone --branch 3.3.0 https://github.com/hakimel/reveal.js.git
 ---&gt; Using cache
 ---&gt; 60802f9547ef
Step 3 : RUN cd reveal.js &amp;&amp; npm install
 ---&gt; Using cache
 ---&gt; f6a9eae37e1f
Step 4 : RUN npm install -g grunt-cli
 ---&gt; Using cache
 ---&gt; 46a8c04a8146
Step 5 : ADD index.html /reveal.js/index.html
 ---&gt; 8aacc8761bb0
Removing intermediate container 330ffea1fbcf
Step 6 : ADD dockerpres.css /reveal.js/css/theme/dockerpres.css
 ---&gt; 4e2dc89fe63d
Removing intermediate container 4bca44fa8856
Step 7 : ADD solarized-light.css /reveal.js/lib/css/solarized-light.css
 ---&gt; 13507f3e22b1
Removing intermediate container 4b92da1e1f68
Step 8 : ADD static /reveal.js/static
 ---&gt; e54b1d802e26
Removing intermediate container 532570ab7b76
Step 9 : WORKDIR /reveal.js/
 ---&gt; Running in 50d3b1cadaa4
 ---&gt; c55fecdca0b2
Removing intermediate container 50d3b1cadaa4
Step 10 : ENTRYPOINT grunt serve
 ---&gt; Running in 4209c7bf8d72
 ---&gt; a331c0d01be1
Removing intermediate container 4209c7bf8d72
Step 11 : EXPOSE 8000
 ---&gt; Running in 3220021949f8
 ---&gt; ae0dd733a5fb
Removing intermediate container 3220021949f8
Successfully built ae0dd733a5fb
                                        </code></pre>
                                    </section>
                                    <section>
                                        <h2>Pushing to Docker Hub</h2>
                                        <pre><code class="bash" data-trim>
$ docker login
Login with your Docker ID to push and pull images from Docker Hub.
Username: tolbertam
Password: 
Login Succeeded

$ docker push tolbertam/docker-getting-started-presentation
The push refers to a repository [docker.io/tolbertam/docker-getting-started-presentation]
b316997c81ff: Pushed 
5138d358f948: Pushed 
8eef5f3b080d: Pushed 
5613b909b0ab: Pushed 
ef4f7f3517c4: Pushed 
042651f42e23: Pushed 
af4319d9d3e3: Pushed 
latest: digest: sha256:b347ea4d52d25e5bc59d9aee052d65d5763dd3fe8b4a76dce84318acb66bebaf size: 3053
                                        </code></pre>
                                    </section>
                                </section>
                                <section>
                                    <section>
                                        <h2>Demo: Deploying your Container in Google Container Engine</h2>
                                    </section>
                                    <section>
                                        <h2>Using Google Cloud Shell</h2>
                                        <pre><code class="bash" data-trim>
$ gcloud container clusters create docker-cluster
Creating cluster docker-cluster...done.                                                           
Created [https://container.googleapis.com/v1/projects/fast-metric-127414/zones/us-central1-b/clust
ers/docker-cluster].
kubeconfig entry generated for docker-cluster.
NAME            ZONE           MASTER_VERSION  MASTER_IP     MACHINE_TYPE   NODE_VERSION  NUM_NODE
S  STATUS
docker-cluster  us-central1-b  1.3.7           104.197.3.17  n1-standard-1  1.3.7         3       
   RUNNING

$ kubectl run pres --image=tolbertam/docker-getting-started-presentation:latest --port=8000

$ kubectl expose deployment pres --type="LoadBalancer"
service "pres" exposed

$ kubectl get service
NAME         CLUSTER-IP    EXTERNAL-IP       PORT(S)    AGE
pres         10.3.255.8    104.155.188.118   8000/TCP   1m
                                        </code></pre>
                                    </section>
                                </section>
                                <section>
                                    <h2>Thanks!</h2>
                                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
                                slideNumber: true,
				history: true,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
